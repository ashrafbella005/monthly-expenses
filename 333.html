<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø§Ù„Ø®Ø·Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ© Ø§Ù„Ø´Ù‡Ø±ÙŠØ©</title>
<style>
/* ======== Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø³ÙŠÙ†Ù…Ø§Ø¦ÙŠ ======== */
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #2c3e50, #4ca1af);
    color: #fff;
    margin: 0;
    padding: 0;
}
.container {
    max-width: 900px;
    margin: 20px auto;
    padding: 20px;
}
header {
    text-align: center;
    margin-bottom: 20px;
}
header h1 {
    font-size: 2em;
    margin-bottom: 10px;
    text-shadow: 2px 2px 8px #000;
}
button {
    background-color: #e67e22;
    color: #fff;
    border: none;
    padding: 10px 20px;
    cursor: pointer;
    font-size: 1em;
    border-radius: 8px;
    transition: 0.3s;
}
button:hover {
    background-color: #d35400;
}
.card {
    background: rgba(0,0,0,0.4);
    padding: 20px;
    border-radius: 12px;
    margin-bottom: 20px;
    box-shadow: 0 8px 16px rgba(0,0,0,0.5);
    transition: 0.3s;
}
.card:hover {
    transform: scale(1.03);
    box-shadow: 0 12px 24px rgba(0,0,0,0.7);
}
.card h2 {
    border-bottom: 2px solid #e67e22;
    padding-bottom: 8px;
    display: flex;
    align-items: center;
}
.card h2 img {
    width: 25px;
    margin-left: 8px;
}
input[type=number] {
    width: 100px;
    padding: 5px;
    border-radius: 5px;
    border: none;
    text-align: right;
}
.progress-container {
  margin: 10px 0;
}
.progress-bar {
  width: 0%;
  height: 25px;
  border-radius: 12px;
  background-color: #27ae60;
  transition: width 0.5s, background-color 0.5s;
}

/* ==== Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© A4 ==== */
@media print {
    body { background: #fff; color: #000; }
    .card { background: #f9f9f9; color: #000; box-shadow: none; }
    button { display: none; }
}
</style>
</head>
<body>
<div class="container">
  <header>
    <h1>ğŸ“„ Ø§Ù„Ø®Ø·Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ© Ø§Ù„Ø´Ù‡Ø±ÙŠØ©</h1>
    <button id="printBtn">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© A4</button>
  </header>

  <!-- Ø§Ù„Ø¯Ø®Ù„ -->
  <section class="card" id="income">
    <h2>ğŸ’° Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„Ø´Ù‡Ø±ÙŠ <img src="https://img.icons8.com/emoji/48/000000/money-bag-emoji.png"/></h2>
    <p>ğŸ’¼ Ø±Ø§ØªØ¨: <span id="salary">7000</span> Ø¬Ù†ÙŠÙ‡</p>
    <p>ğŸ’µ Ø¯Ø¹Ù…: <span id="support">15000</span> Ø¬Ù†ÙŠÙ‡</p>
    <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø®Ù„: <span id="totalIncome">22000</span> Ø¬Ù†ÙŠÙ‡</p>
  </section>

  <!-- Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ø«Ø§Ø¨ØªØ© -->
  <section class="card" id="fixedExpenses">
    <h2>ğŸ§¾ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ø«Ø§Ø¨ØªØ© <img src="https://img.icons8.com/color/48/000000/home--v1.png"/></h2>
    <ul>
      <li>ğŸ  Ø§Ù„Ø¥ÙŠØ¬Ø§Ø±: <input type="number" id="rent" value="8000" /></li>
      <li>ğŸš— Ø§Ù„Ù…ÙˆØ§ØµÙ„Ø§Øª: <input type="number" id="transport" value="2500" /></li>
      <li>ğŸ’¡ ÙƒÙ‡Ø±Ø¨Ø§Ø¡: <input type="number" id="electricity" value="800" /></li>
      <li>ğŸ’³ Ø¯ÙŠÙ†: <input type="number" id="debt" value="1000" /></li>
    </ul>
    <div class="progress-container">
      <label>Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ø«Ø§Ø¨ØªØ©:</label>
      <div class="progress-bar" id="fixedProgress"></div>
    </div>
    <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ø«Ø§Ø¨ØªØ©: <span id="totalFixed">0</span> Ø¬Ù†ÙŠÙ‡</p>
  </section>

  <!-- Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ù…ØªØºÙŠØ±Ø© -->
  <section class="card" id="variableExpenses">
    <h2>ğŸ§º Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ø¨ÙŠØª Ø§Ù„Ù…ØªØºÙŠØ±Ø© <img src="https://img.icons8.com/color/48/000000/shopping-cart.png"/></h2>
    <ul>
      <li>ğŸ Ø£ÙƒÙ„ Ø§Ù„Ø¨ÙŠØª: <input type="number" id="food" /></li>
      <li>ğŸ§¼ Ù†Ø¸Ø§ÙØ© ÙˆØ§Ø­ØªÙŠØ§Ø¬Ø§Øª: <input type="number" id="cleaning" /></li>
      <li>ğŸ± ØºØ¯Ø§: <input type="number" id="lunch" /></li>
      <li>ğŸš¸ Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ø£ÙˆÙ„Ø§Ø¯: <input type="number" id="kids" /></li>
    </ul>
    <div class="progress-container">
      <label>Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ù…ØªØºÙŠØ±Ø©:</label>
      <div class="progress-bar" id="variableProgress"></div>
    </div>
    <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ø¨ÙŠØª: <span id="totalVariable">0</span> Ø¬Ù†ÙŠÙ‡</p>
  </section>

  <!-- Ø§Ù„Ù…Ù„Ø®Øµ ÙˆØ§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª -->
  <section class="card" id="summary">
    <h2>âš ï¸ Ø§Ù„Ù…Ù„Ø®Øµ ÙˆØ§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª <img src="https://img.icons8.com/color/48/000000/alarm.png"/></h2>
    <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ø´Ù‡Ø±ÙŠØ©: <span id="totalExpenses">0</span> Ø¬Ù†ÙŠÙ‡</p>
    <p>Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: <span id="balance">0</span> Ø¬Ù†ÙŠÙ‡</p>
    <div class="progress-container">
      <label>Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ:</label>
      <div class="progress-bar" id="balanceProgress"></div>
    </div>
    <p id="notificationText"></p>
  </section>

  <!-- Ø­Ø¯ÙˆØ¯ ÙŠÙˆÙ…ÙŠØ© ÙˆØ£Ø³Ø¨ÙˆØ¹ÙŠØ© -->
  <section class="card" id="limits">
    <h2>ğŸ“Š Ø§Ù„Ø­Ø¯ÙˆØ¯ Ø§Ù„ÙŠÙˆÙ…ÙŠØ© ÙˆØ§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠØ© <img src="https://img.icons8.com/color/48/000000/clock--v1.png"/></h2>
    <label>Ø§Ù„Ø­Ø¯ Ø§Ù„ÙŠÙˆÙ…ÙŠ Ù„Ù„Ù…ØµØ±ÙˆÙØ§Øª: <input type="number" id="dailyLimit" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø­Ø¯ Ø§Ù„ÙŠÙˆÙ…ÙŠ"/></label><br><br>
    <label>Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ Ù„Ù„Ù…ØµØ±ÙˆÙØ§Øª: <input type="number" id="weeklyLimit" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ"/></label>
  </section>
</div>

<script>
// ===== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ =====
window.onload = function() {
    const fields = ['rent','transport','electricity','debt','food','cleaning','lunch','kids','dailyLimit','weeklyLimit'];
    fields.forEach(id => {
        if(localStorage.getItem(id)) document.getElementById(id).value = localStorage.getItem(id);
        const el = document.getElementById(id);
        if(el) el.addEventListener('input', updateExpenses);
    });
    updateExpenses();
};

// ===== Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª ÙˆØ§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª =====
function updateExpenses() {
    const rent = Number(document.getElementById('rent').value);
    const transport = Number(document.getElementById('transport').value);
    const electricity = Number(document.getElementById('electricity').value);
    const debt = Number(document.getElementById('debt').value);
    const food = Number(document.getElementById('food').value);
    const cleaning = Number(document.getElementById('cleaning').value);
    const lunch = Number(document.getElementById('lunch').value);
    const kids = Number(document.getElementById('kids').value);
    const dailyLimit = Number(document.getElementById('dailyLimit').value) || 0;
    const weeklyLimit = Number(document.getElementById('weeklyLimit').value) || 0;

    const fields = {rent,transport,electricity,debt,food,cleaning,lunch,kids,dailyLimit,weeklyLimit};
    for(let key in fields) localStorage.setItem(key, fields[key]);

    const totalFixed = rent + transport + electricity + debt;
    const totalVariable = food + cleaning + lunch + kids;
    const totalExpenses = totalFixed + totalVariable;
    const totalIncome = 22000;
    const balance = totalIncome - totalExpenses;

    document.getElementById('totalFixed').innerText = totalFixed;
    document.getElementById('totalVariable').innerText = totalVariable;
    document.getElementById('totalExpenses').innerText = totalExpenses;
    document.getElementById('balance').innerText = balance;

    updateProgressBars(totalFixed, totalVariable, totalIncome, balance);
    checkNotifications(balance, electricity, totalVariable, dailyLimit, weeklyLimit);
}

// ===== Ø£Ø´Ø±Ø·Ø© Ø§Ù„ØªÙ‚Ø¯Ù… =====
function updateProgressBars(totalFixed, totalVariable, totalIncome, balance) {
    let fixedPercent = (totalFixed / totalIncome) * 100;
    let variablePercent = (totalVariable / totalIncome) * 100;
    let balancePercent = (balance / totalIncome) * 100;

    let fixedBar = document.getElementById('fixedProgress');
    let variableBar = document.getElementById('variableProgress');
    let balanceBar = document.getElementById('balanceProgress');

    fixedBar.style.width = fixedPercent + "%";
    variableBar.style.width = variablePercent + "%";
    balanceBar.style.width = balancePercent + "%";

    fixedBar.style.backgroundColor = fixedPercent < 50 ? "#27ae60" : fixedPercent < 80 ? "#f1c40f" : "#e74c3c";
    variableBar.style.backgroundColor = variablePercent < 50 ? "#27ae60" : variablePercent < 80 ? "#f1c40f" : "#e74c3c";
    balanceBar.style.backgroundColor = balancePercent > 50 ? "#27ae60" : balancePercent > 20 ? "#f1c40f" : "#e74c3c";
}

// ===== Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª =====
function checkNotifications(balance, electricity, totalVariable, dailyLimit, weeklyLimit) {
    let messages = [];
    if(balance < 0) messages.push("âš ï¸ Ù„Ù‚Ø¯ ØªØ¬Ø§ÙˆØ²Øª Ø§Ù„Ø­Ø¯ Ø§Ù„Ø´Ù‡Ø±ÙŠ Ù„Ù„Ù…ØµØ±ÙˆÙØ§Øª!");
    if(electricity < 200) messages.push("ğŸ’¡ ÙƒÙ‡Ø±Ø¨Ø§Ø¡: Ø§Ù„Ø±ØµÙŠØ¯ Ù…Ù†Ø®ÙØ¶ØŒ ÙŠØ±Ø¬Ù‰ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø´Ø­Ù†!");
    if(dailyLimit > 0 && totalVariable > dailyLimit) messages.push("âš ï¸ ØªØ¬Ø§ÙˆØ²Øª Ø§Ù„Ø­Ø¯ Ø§Ù„ÙŠÙˆÙ…ÙŠ Ù„Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ù…ØªØºÙŠØ±Ø©!");
    if(weeklyLimit > 0 && totalVariable > weeklyLimit) messages.push("âš ï¸ ØªØ¬Ø§ÙˆØ²Øª Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ Ù„Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ù…ØªØºÙŠØ±Ø©!");

    document.getElementById('notificationText').innerHTML = messages.join('<br>');

    if(messages.length > 0 && "Notification" in window) {
        if(Notification.permission === "granted") {
            messages.forEach(msg => new Notification(msg));
        } else if(Notification.permission !== "denied") {
            Notification.requestPermission().then(permission => {
                if(permission === "granted") messages.forEach(msg => new Notification(msg));
            });
        }
    }
}

// ===== Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© =====
document.getElementById('printBtn').addEventListener('click', () => { window.print(); });
</script>
</body>
</html>
